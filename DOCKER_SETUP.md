# Docker Setup - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–Ø —Å–æ–∑–¥–∞–ª —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

1. ‚úÖ `docker-compose.yml` - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
2. ‚úÖ `Dockerfile.backend` - –æ–±—Ä–∞–∑ –¥–ª—è Python backend
3. ‚úÖ `nginx.conf` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx (frontend + proxy)
4. ‚úÖ `requirements.txt` - Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
5. ‚úÖ `.dockerignore` - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker build
6. ‚úÖ `Makefile` - —É–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üì• –®–∞–≥ 1: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç

### –°–∫–∞—á–∞–π —ç—Ç–∏ —Ñ–∞–π–ª—ã –∏ –ø–æ–ª–æ–∂–∏ –≤ `I:\crypto-screener-bybit\`:

1. **docker-compose.yml**
2. **Dockerfile.backend**
3. **nginx.conf**
4. **requirements.txt**
5. **.dockerignore**
6. **Makefile** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ì–¥–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å:

```
I:\crypto-screener-bybit\
‚îú‚îÄ‚îÄ docker-compose.yml          ‚Üê –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ Dockerfile.backend          ‚Üê –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ nginx.conf                  ‚Üê –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt            ‚Üê –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .dockerignore               ‚Üê –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ Makefile                    ‚Üê –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã)
```

---

## üìÅ –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫

–í `I:\crypto-screener-bybit\` —Å–æ–∑–¥–∞–π –ø–∞–ø–∫–∏:

```cmd
mkdir backend
mkdir frontend
mkdir data
mkdir logs
```

**–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
I:\crypto-screener-bybit\
‚îú‚îÄ‚îÄ backend\         ‚Üê –¢—É—Ç –±—É–¥–µ—Ç Python –∫–æ–¥ (–ø–æ–∫–∞ –ø—É—Å—Ç–∞—è)
‚îú‚îÄ‚îÄ frontend\        ‚Üê –¢—É—Ç –±—É–¥–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø–æ–∫–∞ –ø—É—Å—Ç–∞—è)
‚îú‚îÄ‚îÄ data\            ‚Üê SQLite –±–∞–∑–∞ (—Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ logs\            ‚Üê –õ–æ–≥–∏ (—Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile.backend
‚îú‚îÄ‚îÄ nginx.conf
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ .env.example
```

---

## ‚öôÔ∏è –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª

1. **–°–∫–æ–ø–∏—Ä—É–π —à–∞–±–ª–æ–Ω:**
   ```cmd
   copy .env.example .env
   ```

2. **–û—Ç–∫—Ä–æ–π `.env` –≤ –±–ª–æ–∫–Ω–æ—Ç–µ** –∏ –∑–∞–ø–æ–ª–Ω–∏:
   ```bash
   TELEGRAM_BOT_TOKEN=—Ç–≤–æ–π_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
   TELEGRAM_CHAT_ID=—Ç–≤–æ–π_chat_id
   ```

3. **–û—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å**

---

## üéØ –®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã .gitkeep

–ß—Ç–æ–±—ã Git –≤–∏–¥–µ–ª –ø—É—Å—Ç—ã–µ –ø–∞–ø–∫–∏:

```cmd
cd I:\crypto-screener-bybit
type nul > data\.gitkeep
type nul > logs\.gitkeep
```

---

## üê≥ –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Docker —Ä–∞–±–æ—Ç–∞–µ—Ç

–û—Ç–∫—Ä–æ–π **Command Prompt** –∏ –≤–≤–µ–¥–∏:

```cmd
docker --version
docker-compose --version
```

**–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏–∏**, –Ω–∞–ø—Ä–∏–º–µ—Ä:
```
Docker version 24.0.7
Docker Compose version v2.23.0
```

–ï—Å–ª–∏ **–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** - —Å–∫–∞—á–∞–π —Å https://www.docker.com/products/docker-desktop/

---

## üöÄ –®–∞–≥ 6: –ù–ï –ó–ê–ü–£–°–ö–ê–¢–¨ –ü–û–ö–ê!

‚ö†Ô∏è **Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞, –ù–û:**

**–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–¥–∞!** 
- –ü–∞–ø–∫–∞ `backend\` –ø—É—Å—Ç–∞—è (–Ω–µ—Ç Python —Ñ–∞–π–ª–æ–≤)
- –ü–∞–ø–∫–∞ `frontend\` –ø—É—Å—Ç–∞—è (–Ω–µ—Ç HTML —Ñ–∞–π–ª–æ–≤)

**–ï—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ–π—á–∞—Å** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–ø–∞–¥—ë—Ç —Å –æ—à–∏–±–∫–æ–π:
```
ModuleNotFoundError: No module named 'backend.main'
```

---

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ:

- [x] Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
- [x] .env –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] **Python –∫–æ–¥** ‚Üê –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥!
- [ ] **Frontend –∫–æ–¥** ‚Üê –ü–æ—Ç–æ–º

---

## üéØ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:

**–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –±—É–¥–µ—Ç Python –∫–æ–¥ –≤ `backend\`:**

```cmd
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd I:\crypto-screener-bybit

# –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã
docker-compose build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs -f backend
```

---

## üìã –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker Compose

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
```cmd
docker-compose up -d          # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ
docker-compose down           # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker-compose restart        # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose ps             # –°—Ç–∞—Ç—É—Å
```

### –õ–æ–≥–∏:
```cmd
docker-compose logs -f                    # –í—Å–µ –ª–æ–≥–∏ (follow)
docker-compose logs -f backend            # –¢–æ–ª—å–∫–æ backend
docker-compose logs --tail=100 backend    # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
```

### –°–±–æ—Ä–∫–∞:
```cmd
docker-compose build                # –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã
docker-compose up -d --build        # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
```

### –û—á–∏—Å—Ç–∫–∞:
```cmd
docker-compose down -v              # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å + —É–¥–∞–ª–∏—Ç—å volumes (–ë–î!)
docker-compose down --rmi all       # + —É–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑—ã
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ (–∫–æ–≥–¥–∞ –∫–æ–¥ –±—É–¥–µ—Ç):

```cmd
# Health check
curl http://localhost:8000/health

# API docs
http://localhost:8000/docs

# Frontend
http://localhost:3000
```

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç

**–û—à–∏–±–∫–∞:**
```
Error: Bind for 0.0.0.0:8000 failed: port is already allocated
```

**–†–µ—à–µ–Ω–∏–µ:**
–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –≤ `docker-compose.yml`:
```yaml
ports:
  - "8001:8000"  # –í–º–µ—Å—Ç–æ 8000:8000
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ volume

**–û—à–∏–±–∫–∞:**
```
Permission denied: '/data/screener.db'
```

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–∞–ø–∫–∏ `data\` –∏ `logs\` —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –¥–æ—Å—Ç—É–ø–Ω—ã.

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Docker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä—ã—Ç—å **Docker Desktop**
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å –ø–æ–∫–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è (–∏–∫–æ–Ω–∫–∞ –∫–∏—Ç–∞ —Å—Ç–∞–Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π)
3. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞

---

## üìù Makefile –∫–æ–º–∞–Ω–¥—ã (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª)

–ï—Å–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª `Makefile`, –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```cmd
make build          # –°–æ–±—Ä–∞—Ç—å
make up             # –ó–∞–ø—É—Å—Ç–∏—Ç—å
make down           # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
make logs           # –õ–æ–≥–∏
make status         # –°—Ç–∞—Ç—É—Å
make backup         # –ë—ç–∫–∞–ø –ë–î
make help           # –í—Å–µ –∫–æ–º–∞–Ω–¥—ã
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–∞ Windows –Ω—É–∂–µ–Ω `make` —É—Ç–∏–ª–∏—Ç–∞:
- –°–∫–∞—á–∞—Ç—å: http://gnuwin32.sourceforge.net/packages/make.htm
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–µ `docker-compose` –∫–æ–º–∞–Ω–¥—ã

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É!

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å –ø–∏—Å–∞—Ç—å Python –∫–æ–¥ –¥–ª—è `backend\`!

–°–∫–∞–∂–∏ –∫–æ–≥–¥–∞ —Å–∫–æ–ø–∏—Ä—É–µ—à—å —Ñ–∞–π–ª—ã - –Ω–∞—á–Ω—É –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥! üöÄ
